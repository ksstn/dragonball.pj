<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CHARACTERS</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
</head>

<body>
    <!-- navigation bar -->
    <nav class="navbar navbar-expand-lg position-sticky top-0 shadow-sm" style="background-color: #042F67; z-index:1;">
        <div class="container-fluid">
            <a class="navbar-brand ms-4" href="#">
                <img src="assets/logo.jpg" width="84" height="49" alt="dragonball Logo">
            </a>
            <button class="navbar-toggler bg-warning" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse ms-5 me-4" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item me-1"><a class="nav-link text-white" aria-current="page"
                            href="index.html">Home</a></li>
                    <li class="nav-item me-1"><a class="nav-link active text-white" href="#">Characters</a></li>
                    <li class="nav-item me-1"><a class="nav-link text-white" href="planets.html">Planet</a></li>
                    <li class="nav-item me-1"><a class="nav-link text-white" href="about.html">About</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- banner -->
    <div class="position-relative text-center">
        <img src="assets/sub_banner.jpg" class="img-fluid w-100" alt="dragon ball banner">
        <h1 class="position-absolute top-50 start-50 translate-middle text-white banner-title"><span
                style="color:#FFD21F;">CHARACTERS</span></h1>
    <!-- search bar -->
        <div class="position-absolute start-50 translate-middle-x w-75 w-md-50 w-sm-100 px-2 search-bar"
            style="bottom: 17%;">
            <div class="bg-warning rounded-2 shadow-sm p-2">
                <form class="d-flex" onsubmit="event.preventDefault(); search();">
                    <input id="searchInput" type="search" class="form-control border-0"
                        placeholder="Search Character...">
                    <button class="btn btn-danger rounded-3 fw-bold ms-2 px-3">
                        Search
                    </button>
                </form>
            </div>
        </div>
    </div>
    <!-- character-section -->
    <div class="container mt-5">
        <div class="p-5 my-5 shadow-sm rounded-3 char-section" style="width: 108%; position: relative; left: -4%;">
            <div class="row text-center text-white text-lg justify-content-center mb-5 char-section-desc">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
                dolore magna aliqua.
                Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                consequat.
            </div>
            <div class="row" id="contents"></div>
            <div class="d-flex justify-content-center my-4">
                <button id="prevBtn" class="btn btn-danger me-3">Prev</button>
                <span class="align-self-center fw-bold text-white" id="pageNumber">1</span>
                <button id="nextBtn" class="btn btn-danger ms-3">Next</button>
            </div>
        </div>
    </div>
    <!-- footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container text-center">
            <div class="d-flex justify-content-center align-items-center gap-3 mb-2">
                <img src="assets/logo.jpg" alt="dragonball logo" width="80" height="50">
                <span style="font-size:24px;">â”‚</span>
                <img src="assets/logo.png" alt="KSSTN Logo" width="60" height="60">
            </div>
            <p class="mb-2" style="font-size: 13px;">Dragon Ball | Kristine Maglinao BSIT 3-2 |
                Prof: Christopher De Claro</p>
            <p class="mb-2" style="font-size: 13px;">&copy; 2025 <a href="https://github.com/ksstn"
                    class="text-white text-decoration-none">dragonball.ksstn</a></p>
            <hr class="bg-secondary">
            <div class="d-flex justify-content-center gap-2 mt-2">
                <a class="btn btn-outline-secondary btn-sm rounded-circle" href="https://github.com"><i
                        class="bi bi-github"></i></a>
                <a class="btn btn-outline-secondary btn-sm rounded-circle" href="https://instagram.com"><i
                        class="bi bi-instagram"></i></a>
                <a class="btn btn-outline-secondary btn-sm rounded-circle" href="https://twitter.com"><i
                        class="bi bi-twitter-x"></i></a>
                <a class="btn btn-outline-secondary btn-sm rounded-circle" href="https://facebook.com"><i
                        class="bi bi-facebook"></i></a>
            </div>
        </div>
    </footer>

    <script>
        const contents = document.getElementById("contents");
        const searchInput = document.getElementById("searchInput");
        let allCharacters = [];
        let filteredCharacters = [];
        let currentPage = 1;
        const cardsPerPage = 6;

        const getCharacters = async () => {
            const response = await fetch("https://dragonball-api.com/api/characters?limit=1000");
            const data = await response.json();
            allCharacters = data.items;
            filteredCharacters = [...allCharacters];
            renderPage();
        };
        const renderPage = () => {
            contents.innerHTML = "";
            const start = (currentPage - 1) * cardsPerPage;
            const end = start + cardsPerPage;

            for (let i = start; i < end && i < filteredCharacters.length; i++) {
                const character = filteredCharacters[i];
                contents.innerHTML += `
<div class="col-12 col-md-6 col-lg-4 d-flex mb-5">
    <div class="card shadow rounded-3 overflow-hidden character-card w-100">
        <div class="row g-0 card-row">
            <div class="col-md-5 text-center image-wrapper">
                <img src="${character.image}" class="img-fluid character-img" alt="${character.name}">
            </div>
            <div class="col-md-7 text-white d-flex align-items-center" style="background-color:#E85C0D;">
                <div class="card-body">
                    <h5 class="card-title text-center fw-bold">${character.name}</h5>
                    <p><strong class="desc">Race:</strong> ${character.race ?? "Unknown"}</p>
                    <p><strong class="desc">Gender:</strong> ${character.gender ?? "Unknown"}</p>
                    <p><strong class="desc">Ki:</strong> ${character.ki ?? "N/A"}</p>
                    <p><strong class="desc">Max Ki:</strong> ${character.maxKi ?? "N/A"}</p>
                    <p><strong class="desc">Affiliation:</strong> ${character.affiliation ?? "Unknown"}</p>
                </div>
            </div>
        </div>
    </div>
</div>`;
};
            document.getElementById("pageNumber").innerText = currentPage;
        };

        // pagination buttons
        document.getElementById("prevBtn").addEventListener("click", () => {
            if (currentPage > 1) {
                currentPage--;
                renderPage();
            }
        });
        document.getElementById("nextBtn").addEventListener("click", () => {
            const totalPages = filteredCharacters.length / cardsPerPage;
            if (currentPage < totalPages) {
                currentPage++;
                renderPage();
            }
        });
        // search function
        function search() {
            const query = searchInput.value.toLowerCase();
            filteredCharacters = allCharacters.filter(c => c.name.toLowerCase().includes(query));
            currentPage = 1;
            renderPage();
        }
        getCharacters();
    </script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
</body>

</html>